import{g as j,P as m,j as e}from"./index-Dek70QwS.js";import{u as N,r}from"./react-vendor-KOjhOASN.js";import{H as v,a2 as k,l as _,a1 as P,a3 as C,a4 as D}from"./ui-vendor-DC5Jkz16.js";import"./firebase-vendor-CMaS3_GD.js";import"https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";import"https://www.gstatic.com/firebasejs/12.6.0/firebase-analytics.js";import"https://www.gstatic.com/firebasejs/12.6.0/firebase-messaging.js";const H=({onNotify:u})=>{const h=N(),{currentTrack:p,isPlaying:g,play:I,pause:S,lastEndedTrackId:c}=j(),[f,y]=r.useState([]),[z,E]=r.useState(null),[l,w]=r.useState(()=>{try{return JSON.parse(localStorage.getItem("played_podcasts")||"[]")}catch{return[]}});r.useEffect(()=>{if(c&&!l.includes(c)){const s=[...l,c];w(s),localStorage.setItem("played_podcasts",JSON.stringify(s)),u("Podcast completado y marcado como escuchado","success")}},[c]),r.useEffect(()=>{(async()=>{const o=await caches.open("audio-cache-v1"),t=await o.keys();m.filter(a=>t.some(n=>n.url.includes(encodeURI(a.url)))).map(a=>a.id);const i=[];for(const a of m)await o.match(a.url)&&i.push(a.id);y(i)})()},[]);const[d,b]=r.useState(""),x=m.filter(s=>s.title.toLowerCase().includes(d.toLowerCase())||s.description.toLowerCase().includes(d.toLowerCase()));return e.jsxs("div",{className:"flex-1 overflow-y-auto no-scrollbar bg-gray-50 dark:bg-[#121212] pb-32 relative",children:[e.jsx("div",{className:"sticky top-0 z-50 bg-gradient-to-r from-indigo-900 to-purple-800 px-6 py-6 shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-white/20 backdrop-blur-sm flex items-center justify-center",children:e.jsx(v,{size:24,className:"text-white"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h2",{className:"text-lg font-bold text-white",children:"Podcasts Bíblicos"}),e.jsxs("p",{className:"text-purple-100 text-sm",children:[m.length," episodios disponibles"]})]})]}),e.jsxs("div",{className:"text-xs font-bold bg-white/20 backdrop-blur-sm text-white px-3 py-1.5 rounded-lg uppercase tracking-wider flex items-center gap-1.5",children:[e.jsx(k,{size:12}),"Online"]})]})}),e.jsx("div",{className:"px-4 py-2 bg-gray-50 dark:bg-[#121212] sticky top-[90px] z-40",children:e.jsx("input",{type:"text",placeholder:"Buscar podcasts...",value:d,onChange:s=>b(s.target.value),className:"w-full px-4 py-3 rounded-xl bg-white dark:bg-[#1a1a1a] border border-gray-200 dark:border-gray-800 focus:outline-none focus:ring-2 focus:ring-purple-500 shadow-sm text-gray-900 dark:text-white"})}),e.jsxs("div",{className:"p-4 space-y-4",children:[[...x].sort((s,o)=>{const t=l.includes(s.id)?1:0,i=l.includes(o.id)?1:0;return t-i}).map(s=>{const t=!(s.url.includes("drive.google.com")&&s.url.includes("preview"))&&(p==null?void 0:p.id)===s.id,i=t&&g,a=f.includes(s.id),n=l.includes(s.id);return e.jsx("article",{onClick:()=>h(`/podcast/${s.id}`),className:`
                                cursor-pointer
                                bg-white dark:bg-[#1a1a1a] rounded-2xl overflow-hidden shadow-sm border transition-all hover:shadow-md active:scale-[0.99]
                                ${t?"border-purple-500 ring-1 ring-purple-500/20":"border-gray-100 dark:border-gray-800"}
                                ${n?"opacity-80":""}
                            `,children:e.jsxs("div",{className:"p-5 flex items-center gap-4",children:[e.jsx("div",{className:`flex-shrink-0 w-12 h-12 rounded-full flex items-center justify-center transition-all ${i?"bg-purple-600 text-white shadow-lg shadow-purple-500/30":"bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400"}`,children:i?e.jsxs("div",{className:"flex gap-1",children:[e.jsx("span",{className:"w-1 h-4 bg-white animate-[music-bar_1s_ease-in-out_infinite]"}),e.jsx("span",{className:"w-1 h-4 bg-white animate-[music-bar_1s_ease-in-out_infinite_0.2s]"}),e.jsx("span",{className:"w-1 h-4 bg-white animate-[music-bar_1s_ease-in-out_infinite_0.4s]"})]}):e.jsx(_,{size:20,fill:"currentColor",className:"ml-1"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:`text-lg font-bold leading-tight mb-1 ${t?"text-purple-600 dark:text-purple-400":"text-gray-900 dark:text-white"}`,children:s.title}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2 font-serif",children:s.description})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2 text-gray-400",children:[n&&e.jsx(P,{size:16,className:"text-green-500"}),a&&e.jsx(C,{size:16,className:"text-blue-500"})]})]})},s.id)}),x.length===0&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-gray-400",children:[e.jsx(D,{size:48,className:"mb-4 opacity-50"}),e.jsx("p",{children:d?"No se encontraron podcasts con ese término.":"No hay podcasts disponibles aún."})]})]})]})};export{H as default};
