import{k as b,f as N,j as e,l as w}from"./index-Da27Orm5.js";import{u as v,r as t}from"./react-vendor-B6z1n1mp.js";import{H as k,a4 as C,I as S,l as p,D as z,a5 as D}from"./ui-vendor-CLl8kLQA.js";import"./firebase-vendor-adPvufnm.js";import"https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";import"https://www.gstatic.com/firebasejs/12.6.0/firebase-analytics.js";import"https://www.gstatic.com/firebasejs/12.6.0/firebase-messaging.js";const I=()=>{const g=v(),[r,h]=t.useState(""),[o,u]=t.useState([]),[a,c]=t.useState(!0),[l,d]=t.useState(null),[n,f]=t.useState(null),{getDownloadState:j}=b();t.useEffect(()=>{x()},[]);const x=async()=>{try{c(!0),d(null);const{podcasts:s,feed:i}=await N();u(s),f({title:i.title,image:i.image,author:i.author})}catch(s){console.error("Error loading podcasts:",s),d("Error al cargar los podcasts. Intenta de nuevo más tarde.")}finally{c(!1)}},m=o.filter(s=>s.title.toLowerCase().includes(r.toLowerCase())||s.description.toLowerCase().includes(r.toLowerCase()));return e.jsxs("div",{className:"flex-1 overflow-y-auto no-scrollbar bg-gray-50 dark:bg-[#121212] pb-32 relative",children:[e.jsx("div",{className:"sticky top-0 z-50 bg-gradient-to-r from-indigo-900 to-purple-800 px-6 py-6 shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-white/20 backdrop-blur-sm flex items-center justify-center",children:e.jsx(k,{size:24,className:"text-white"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h2",{className:"text-lg font-bold text-white",children:(n==null?void 0:n.title)||"Podcasts Bíblicos"}),e.jsx("p",{className:"text-purple-100 text-sm",children:a?"Cargando...":`${o.length} episodios disponibles`})]})]}),e.jsxs("div",{className:"text-xs font-bold bg-white/20 backdrop-blur-sm text-white px-3 py-1.5 rounded-lg uppercase tracking-wider flex items-center gap-1.5",children:[e.jsx(C,{size:12}),"Online"]})]})}),e.jsx("div",{className:"px-4 py-2 bg-gray-50 dark:bg-[#121212] sticky top-[90px] z-40",children:e.jsx("input",{type:"text",placeholder:"Buscar podcasts...",value:r,onChange:s=>h(s.target.value),className:"w-full px-4 py-3 rounded-xl bg-white dark:bg-[#1a1a1a] border border-gray-200 dark:border-gray-800 focus:outline-none focus:ring-2 focus:ring-purple-500 shadow-sm text-gray-900 dark:text-white"})}),e.jsxs("div",{className:"p-4 space-y-4",children:[a&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-gray-400",children:[e.jsx(S,{size:48,className:"mb-4 animate-spin"}),e.jsx("p",{children:"Cargando episodios..."})]}),l&&!a&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-red-500",children:[e.jsx("p",{className:"mb-4",children:l}),e.jsx("button",{onClick:x,className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Reintentar"})]}),!a&&!l&&m.map(s=>{const y=j(s.id)==="completed";return e.jsx("article",{onClick:()=>g(`/podcast/${s.id}`),className:"cursor-pointer bg-white dark:bg-[#1a1a1a] rounded-2xl overflow-hidden shadow-sm border border-gray-100 dark:border-gray-800 transition-all hover:shadow-md active:scale-[0.99]",children:e.jsxs("div",{className:"p-5 flex items-center gap-4",children:[e.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full flex items-center justify-center bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400 transition-all",children:e.jsx(p,{size:20,fill:"currentColor",className:"ml-1"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-lg font-bold leading-tight mb-1 text-gray-900 dark:text-white",children:s.title}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2 font-serif",children:s.description}),e.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-500",children:new Date(s.pubDate).toLocaleDateString()}),s.duration>0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-xs text-gray-400",children:"•"}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-500",children:w(s.duration)})]}),y&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-xs text-gray-400",children:"•"}),e.jsxs("span",{className:"text-xs text-green-600 dark:text-green-400 flex items-center gap-1",children:[e.jsx(z,{size:12}),"Offline"]})]})]})]}),e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-100 dark:bg-purple-900/20 flex items-center justify-center",children:e.jsx(p,{size:14,className:"text-purple-600 dark:text-purple-400 ml-0.5",fill:"currentColor"})})})]})},s.id)}),!a&&!l&&m.length===0&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-gray-400",children:[e.jsx(D,{size:48,className:"mb-4 opacity-50"}),e.jsx("p",{children:r?"No se encontraron podcasts con ese término.":"No hay podcasts disponibles aún."})]})]})]})};export{I as default};
