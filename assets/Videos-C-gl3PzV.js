import{B as g,j as t,V as m}from"./index-D0bczb5w.js";import{r as u}from"./react-vendor-KOjhOASN.js";import{a4 as y,a5 as w,b as j,a6 as N,J as k}from"./ui-vendor-Dz3Dph9r.js";import"./firebase-vendor-YXA9jPlQ.js";import"https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";import"https://www.gstatic.com/firebasejs/12.6.0/firebase-analytics.js";import"https://www.gstatic.com/firebasejs/12.6.0/firebase-messaging.js";const C=async l=>new Promise(o=>{const c=document.createElement("canvas"),e=c.getContext("2d");if(!e){o("");return}const s=1280,n=720;c.width=s,c.height=n;const r=l.theme||"blue",a=e.createLinearGradient(0,0,s,n);switch(r){case"blue":a.addColorStop(0,"#1e3a8a"),a.addColorStop(1,"#2563eb");break;case"purple":a.addColorStop(0,"#581c87"),a.addColorStop(1,"#9333ea");break;case"sunset":a.addColorStop(0,"#9a3412"),a.addColorStop(1,"#ea580c");break;case"dark":a.addColorStop(0,"#0f172a"),a.addColorStop(1,"#334155");break;case"emerald":a.addColorStop(0,"#064e3b"),a.addColorStop(1,"#10b981");break;case"ocean":a.addColorStop(0,"#0c4a6e"),a.addColorStop(1,"#0ea5e9");break;default:a.addColorStop(0,"#1e3a8a"),a.addColorStop(1,"#3b82f6")}e.fillStyle=a,e.fillRect(0,0,s,n),e.fillStyle="rgba(255, 255, 255, 0.05)",e.beginPath(),e.arc(s,0,400,0,Math.PI*2),e.fill(),e.beginPath(),e.arc(0,n,300,0,Math.PI*2),e.fill(),e.fillStyle="rgba(255, 255, 255, 0.1)",e.beginPath(),e.moveTo(s/2-50,n/2-80),e.lineTo(s/2+80,n/2),e.lineTo(s/2-50,n/2+80),e.fill(),e.fillStyle="#ffffff",e.textAlign="center",e.font="bold 80px sans-serif",e.shadowColor="rgba(0,0,0,0.5)",e.shadowBlur=20,e.shadowOffsetX=0,e.shadowOffsetY=10;const i=l.title.split(" ");let d="",p=n/2-20;const h=s-200,b=90;l.title.length>30&&(p-=40);for(let f=0;f<i.length;f++){const x=d+i[f]+" ";e.measureText(x).width>h&&f>0?(e.fillText(d,s/2,p),d=i[f]+" ",p+=b):d=x}e.fillText(d,s/2,p),e.shadowBlur=0,e.shadowOffsetY=0,e.font="bold 30px sans-serif",e.fillStyle="rgba(255, 255, 255, 0.8)",e.fillText(g.appName.toUpperCase(),s/2,n-60),e.strokeStyle="rgba(255, 255, 255, 0.5)",e.lineWidth=4,e.beginPath(),e.moveTo(s/2-50,n-100),e.lineTo(s/2+50,n-100),e.stroke(),o(c.toDataURL("image/jpeg",.8))}),F=({onNotify:l})=>t.jsxs("div",{className:"flex-1 overflow-y-auto no-scrollbar bg-gray-50 dark:bg-[#121212] pb-20 relative",children:[t.jsx("div",{className:"sticky top-0 z-50 bg-gradient-to-r from-purple-600 to-indigo-600 px-6 py-6 shadow-lg",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-12 h-12 rounded-2xl bg-white/20 backdrop-blur-sm flex items-center justify-center",children:t.jsx(y,{size:24,className:"text-white"})}),t.jsxs("div",{className:"text-left",children:[t.jsx("h2",{className:"text-lg font-bold text-white",children:"Videos Bíblicos"}),t.jsxs("p",{className:"text-purple-100 text-sm",children:[m.length," videos disponibles"]})]})]}),t.jsxs("div",{className:"text-xs font-bold bg-white/20 backdrop-blur-sm text-white px-3 py-1.5 rounded-lg uppercase tracking-wider flex items-center gap-1.5",children:[t.jsx(w,{size:12}),"Online"]})]})}),t.jsxs("div",{className:"p-4 space-y-6",children:[m.map(o=>t.jsx(S,{video:o},o.id)),m.length===0&&t.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-gray-400",children:[t.jsx(j,{size:48,className:"mb-4 opacity-50"}),t.jsx("p",{children:"No hay videos disponibles."})]})]})]}),S=({video:l})=>{const o=u.useRef(null),[c,e]=u.useState("");u.useEffect(()=>{let r=!0;return(async()=>{try{if(l.thumbnail)r&&e(l.thumbnail);else{const i=await C(l);r&&e(i)}}catch(i){console.error("Error initializing video card",i)}})(),()=>{r=!1}},[]);const s=async()=>{if(o.current)try{o.current.requestFullscreen?await o.current.requestFullscreen():o.current.webkitRequestFullscreen?await o.current.webkitRequestFullscreen():o.current.msRequestFullscreen&&await o.current.msRequestFullscreen();const r=screen.orientation;if(r&&r.lock)try{await r.lock("landscape")}catch{console.log("Rotación automática no soportada o bloqueada")}}catch(r){console.warn("No se pudo activar pantalla completa:",r)}},n=async()=>{try{document.fullscreenElement&&await document.exitFullscreen(),screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock()}catch(r){console.warn("Error al salir de pantalla completa",r)}};return t.jsxs("article",{className:"bg-white dark:bg-[#1a1a1a] rounded-2xl overflow-hidden shadow-sm border border-gray-100 dark:border-gray-800 transition-all",children:[t.jsx("div",{className:"relative w-full aspect-video bg-black group",children:t.jsxs("video",{ref:o,controls:!0,controlsList:"nodownload",onContextMenu:r=>r.preventDefault(),playsInline:!0,className:"w-full h-full object-contain",poster:c,preload:"none",onPlay:s,onEnded:n,children:[t.jsx("source",{src:l.url,type:"video/mp4"}),"Tu navegador no soporta video."]})}),t.jsxs("div",{className:"p-5",children:[t.jsx("div",{className:"flex justify-between items-start mb-2",children:t.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white leading-tight flex-1 mr-2",children:l.title})}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2 mb-4 font-serif",children:l.description}),t.jsxs("div",{className:"flex items-center gap-4 text-xs font-medium text-gray-400 dark:text-gray-500 border-t border-gray-100 dark:border-gray-800 pt-3",children:[t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(N,{size:14})," ",l.date]}),l.duration&&t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(k,{size:14})," ",l.duration]})]})]})]})};export{F as default};
