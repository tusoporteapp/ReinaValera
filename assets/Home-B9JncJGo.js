import{d as U,j as e,u as X,a as J,t as Y}from"./index-DXl8ZGTs.js";import{r as c,u as F,R as Z}from"./react-vendor-KOjhOASN.js";import{f as ee,h as te,j as se,k as ae}from"./firebase-vendor-CMaS3_GD.js";import{u as j,F as ie,X as B,K as T,T as f,y as $,h as v,B as D,N as M,O as le,b as re,G as oe,C as S,Q as ne,d as de,V as ce}from"./ui-vendor-CH5ACy0w.js";import"https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";import"https://www.gstatic.com/firebasejs/12.6.0/firebase-analytics.js";import"https://www.gstatic.com/firebasejs/12.6.0/firebase-messaging.js";const xe=()=>{const[m,r]=c.useState(null);return c.useEffect(()=>{const n=ee(U,"stats","global"),a=te(n,d=>{d.exists()?r(d.data().visits||0):r(0)});return(async()=>{try{await se(n,{visits:ae(1)},{merge:!0})}catch(d){console.error("Error registering visit:",d)}})(),()=>a()},[]),{visitCount:m}},me=({isOpen:m,onClose:r,notifications:n,onClearAll:a,onMarkAsRead:o})=>{if(!m)return null;const d=s=>new Date(s).toLocaleDateString("es-ES",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}),x=F(),p=s=>{o(s.id),s.path&&(x(s.path),r())};return e.jsxs("div",{className:"fixed inset-0 z-[100] flex justify-end",children:[e.jsx("div",{className:"absolute inset-0 bg-black/30 backdrop-blur-sm animate-in fade-in duration-300",onClick:r}),e.jsxs("div",{className:"relative w-full max-w-sm h-full bg-white dark:bg-[#1a1a1a] shadow-2xl animate-in slide-in-from-right duration-300 flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-800 flex items-center justify-between bg-white/80 dark:bg-[#1a1a1a]/80 backdrop-blur-md z-10",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{size:20,className:"text-primary"}),e.jsx("h2",{className:"font-bold text-lg dark:text-white",children:"Notificaciones"}),e.jsx("span",{className:"bg-gray-100 dark:bg-gray-800 text-xs font-bold px-2 py-0.5 rounded-full text-gray-600 dark:text-gray-400",children:n.length})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[n.length>0&&e.jsx("button",{onClick:a,className:"p-2 hover:bg-red-50 dark:hover:bg-red-900/20 text-red-500 rounded-full transition-colors",title:"Borrar todas",children:e.jsx(ie,{size:18})}),e.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:e.jsx(B,{size:20})})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:n.length===0?e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-gray-400 space-y-4 opacity-60",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center",children:e.jsx(j,{size:32})}),e.jsx("p",{className:"text-sm",children:"No tienes notificaciones"})]}):n.map(s=>e.jsxs("div",{className:`
                  relative p-4 rounded-xl border transition-all hover:shadow-md cursor-pointer
                  ${s.read?"bg-white dark:bg-[#1a1a1a] border-gray-100 dark:border-gray-800 opacity-80":"bg-blue-50/50 dark:bg-blue-900/10 border-blue-100 dark:border-blue-800"}
                `,onClick:()=>p(s),children:[!s.read&&e.jsx("div",{className:"absolute top-4 right-4 w-2 h-2 bg-blue-500 rounded-full"}),e.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-1 pr-4",children:s.title}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 leading-relaxed mb-2",children:s.body}),e.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-gray-400 font-medium uppercase tracking-wider",children:[e.jsx(T,{size:10}),d(s.timestamp)]})]},s.id))})]})]})},ue=({milestone:m,onClose:r})=>{const a=(o=>o===1e6?{title:"¬°Somos 1 Mill√≥n!",body:"Gracias a ti y a cada persona que ha sido parte de este viaje. Hemos alcanzado nuestra primera gran meta.",icon:e.jsx(f,{size:48,className:"text-yellow-400"})}:o===5e6?{title:"¬°5 Millones de Corazones!",body:"La comunidad sigue creciendo. Gracias por compartir la palabra y ser luz.",icon:e.jsx($,{size:48,className:"text-pink-500 fill-pink-500"})}:o===1e7?{title:"¬°10 Millones de Usuarios!",body:"Esto es incre√≠ble. Diez millones de vidas conectadas. Gracias por tu fidelidad.",icon:e.jsx(f,{size:48,className:"text-purple-500"})}:o===1e8?{title:"¬°100 Millones! Hito Hist√≥rico",body:"Hemos llegado a lo inimaginable. Gracias por hacer de esta aplicaci√≥n la herramienta b√≠blica m√°s usada. ¬°Comparte este logro!",icon:e.jsx(he,{})}:{title:"¬°Nuevo Hito Alcanzado!",body:`Hemos superado los ${o.toLocaleString()} usuarios.`,icon:e.jsx(f,{size:48,className:"text-blue-500"})})(m);return c.useEffect(()=>{const d=Date.now()+3e3,x=()=>{v({particleCount:5,angle:60,spread:55,origin:{x:0},colors:["#FFD700","#FF69B4","#00BFFF"]}),v({particleCount:5,angle:120,spread:55,origin:{x:1},colors:["#FFD700","#FF69B4","#00BFFF"]}),Date.now()<d&&requestAnimationFrame(x)};x()},[]),e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-300",children:e.jsxs("div",{className:"bg-white dark:bg-[#1e1e1e] rounded-3xl p-8 max-w-sm w-full shadow-2xl relative animate-in zoom-in-50 duration-500 text-center border border-white/20",children:[e.jsx("button",{onClick:r,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors",children:e.jsx(B,{size:24})}),e.jsx("div",{className:"mb-6 flex justify-center",children:e.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-full shadow-inner",children:a.icon})}),e.jsx("h2",{className:"text-3xl font-black mb-4 bg-gradient-to-r from-yellow-500 to-orange-500 bg-clip-text text-transparent",children:a.title}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-lg leading-relaxed mb-8",children:a.body}),e.jsx("button",{onClick:r,className:"w-full bg-black dark:bg-white text-white dark:text-black font-bold py-4 rounded-xl hover:scale-[1.02] active:scale-95 transition-all shadow-xl",children:"¬°Celebrar! üéâ"})]})})},he=()=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-indigo-500",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"2",x2:"22",y1:"12",y2:"12"}),e.jsx("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"})]}),we=({data:m,onNavigate:r,lastReading:n,progress:a,setShowDailyGoalModal:o,setShowQuizModal:d,onShare:x,userName:p,onShowFeedback:s,notifications:y=[],onClearNotifications:L=()=>{},onMarkNotificationAsRead:H=()=>{},bookmarks:G})=>{const u=F(),[I,N]=Z.useState(!1),{totalLikes:w}=X(),{visitCount:h}=xe(),[R,k]=c.useState(!1),[z,E]=c.useState(0);c.useEffect(()=>{if(!h)return;const t=(l,g)=>{const C=`milestone_shown_${l}`;h>=l&&h<l+10&&!localStorage.getItem(C)&&(localStorage.setItem(C,"true"),g==="confetti"?v({particleCount:100,spread:70,origin:{y:.6}}):(E(l),k(!0)))};t(100,"confetti"),t(1e3,"confetti"),t(5e3,"confetti"),t(1e4,"confetti"),t(5e4,"confetti"),t(1e5,"confetti"),t(1e6,"modal"),t(5e6,"modal"),t(1e7,"modal"),t(1e8,"modal")},[h]);const[V,_]=c.useState(0);c.useEffect(()=>{let t=0;for(let l=0;l<localStorage.length;l++){const g=localStorage.key(l);g&&g.startsWith("liked_")&&localStorage.getItem(g)==="true"&&t++}_(t)},[]),V+G.length;const{bookName:A,chapterIndex:O,bookId:be}=n,q=O+1,P=()=>{const t=new Date().getHours(),l=p?`, ${p.split(" ")[0]}`:"";return t<12?`Buenos d√≠as${l}`:t<19?`Buenas tardes${l}`:`Buenas noches${l}`},i=c.useMemo(()=>J.getDevotionalOfTheDay(),[]),b=c.useMemo(()=>Y.getTopicOfTheDay(),[]),Q=Math.min(100,Math.round(a.chaptersReadToday/a.dailyGoal*100)),W=()=>{i&&x&&x({text:`Devocional del D√≠a: ${i.devocional_central.titulo}

${i.devocional_central.explicacion.substring(0,150)}...`,reference:`${i.metadatos.libro} ${i.metadatos.capitulo}`,url:"https://bibliarv1909.com"})},K=()=>{if(i){const t=i.bookId||i.metadatos.libro;u(`/devocional/${t}/${i.metadatos.capitulo}`)}};return e.jsxs("div",{className:"flex-1 overflow-y-auto bg-gray-50 dark:bg-[#121212] p-4 pb-24",children:[e.jsx("header",{className:"mb-6 mt-2 px-2",children:e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-serif font-bold text-gray-900 dark:text-white animate-in slide-in-from-left duration-500",children:P()}),e.jsxs("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-1 flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-blue-500"}),m.version||"Reina Valera 1909"]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-1",children:[e.jsxs("button",{onClick:()=>N(!0),className:"relative p-2 bg-white dark:bg-[#1a1a1a] rounded-full shadow-sm border border-gray-100 dark:border-gray-800 text-gray-600 dark:text-gray-300 active:scale-95 transition-transform",children:[e.jsx(j,{size:20}),y.some(t=>!t.read)&&e.jsx("span",{className:"absolute top-0 right-0 w-2.5 h-2.5 bg-red-500 rounded-full border-2 border-white dark:border-[#1a1a1a]"})]}),h!==null&&e.jsx("div",{className:"flex flex-col items-end",children:e.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] text-gray-400 font-medium px-1 bg-gray-100/50 dark:bg-gray-800/50 rounded-md py-0.5",children:[e.jsx("span",{className:"uppercase tracking-widest text-[8px] opacity-70",children:"VISITAS"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("span",{className:"relative flex h-2 w-2",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),e.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-green-500"})]}),e.jsx("span",{className:"font-bold text-gray-600 dark:text-gray-300 tabular-nums",children:h.toLocaleString()})]})]})})]})]})}),R&&z>0&&e.jsx(ue,{milestone:z,onClose:()=>k(!1)}),e.jsxs("div",{className:"mb-6 grid grid-cols-3 gap-3 animate-in slide-in-from-bottom-2 duration-500 delay-100",children:[e.jsxs("button",{onClick:()=>r("reader"),className:"bg-gradient-to-br from-emerald-500 to-teal-600 rounded-2xl p-4 text-white shadow-lg relative overflow-hidden cursor-pointer active:scale-95 transition-all group text-left col-span-1",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -mr-8 -mt-8 blur-2xl"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(T,{size:16,className:"text-emerald-200"}),e.jsx("div",{className:"h-8 w-8 bg-white/20 rounded-lg flex items-center justify-center backdrop-blur-sm",children:e.jsx(D,{size:16})})]}),e.jsx("h3",{className:"text-sm font-bold mb-0.5 truncate",children:A}),e.jsxs("p",{className:"text-xs text-emerald-100",children:["Cap. ",q]})]})]}),e.jsxs("div",{onClick:()=>o(!0),className:"bg-gradient-to-br from-blue-600 to-indigo-700 rounded-2xl p-4 text-white shadow-lg relative overflow-hidden cursor-pointer active:scale-95 transition-all group col-span-1",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -mr-8 -mt-8 blur-2xl"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(M,{size:16,className:"text-blue-200"}),e.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[e.jsx(le,{size:12,className:a.dailyStreak>0?"text-orange-400 fill-orange-400":""}),e.jsx("span",{className:"font-bold",children:a.dailyStreak})]})]}),e.jsx("h3",{className:"text-sm font-bold mb-1",children:"Meta Diaria"}),e.jsxs("div",{className:"flex items-baseline gap-1",children:[e.jsx("span",{className:"text-xl font-bold",children:a.chaptersReadToday}),e.jsxs("span",{className:"text-xs text-blue-100",children:["/ ",a.dailyGoal]})]}),e.jsx("div",{className:"mt-2 h-1.5 bg-black/20 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-white rounded-full transition-all duration-500",style:{width:`${Q}%`}})})]})]}),e.jsxs("div",{onClick:()=>d(!0),className:"bg-gradient-to-br from-purple-600 to-pink-600 rounded-2xl p-4 text-white shadow-lg relative overflow-hidden cursor-pointer active:scale-95 transition-all group col-span-1",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -mr-8 -mt-8 blur-2xl"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(re,{size:16,className:"text-purple-200"}),e.jsx("div",{className:"h-8 w-8 bg-white/20 rounded-lg flex items-center justify-center backdrop-blur-sm",children:e.jsx(f,{size:16})})]}),e.jsx("h3",{className:"text-sm font-bold mb-0.5",children:"Quiz"}),e.jsx("p",{className:"text-xs text-purple-100",children:"B√≠blico"})]})]})]}),e.jsx("div",{className:"mb-6 animate-in slide-in-from-bottom-3 duration-500 delay-200",children:e.jsxs("button",{onClick:()=>u("/favoritos"),className:"w-full bg-gradient-to-r from-pink-500 to-rose-600 rounded-3xl p-5 text-white shadow-xl shadow-pink-500/20 relative overflow-hidden group active:scale-[0.98] transition-all text-left",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-10 -mt-10 blur-2xl group-hover:bg-white/20 transition-colors"}),e.jsxs("div",{className:"relative z-10 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(oe,{className:"text-pink-100 fill-pink-100/30",size:18}),e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider text-pink-100",children:"Tendencias"})]}),e.jsxs("h3",{className:"text-2xl font-bold leading-none mb-1",children:["Lo m√°s popular ",e.jsx("span",{className:"text-base font-medium opacity-90",children:"de la comunidad"})]}),e.jsx("p",{className:"text-xs text-pink-100 max-w-[200px] truncate",children:w>0?`+${w.toLocaleString()} likes en la comunidad`:"Descubre qu√© est√°n leyendo otros."})]}),e.jsx("div",{className:"h-12 w-12 bg-white/20 backdrop-blur-md rounded-2xl flex items-center justify-center shadow-sm group-hover:scale-110 transition-transform",children:e.jsx(S,{size:24,className:"text-white"})})]})]})}),i&&e.jsx("div",{className:"mb-6 animate-in slide-in-from-bottom-5 duration-500 delay-300",children:e.jsxs("div",{className:"bg-gradient-to-br from-violet-600 to-fuchsia-700 rounded-3xl p-6 text-white shadow-xl shadow-violet-500/20 relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-8 -mt-8 blur-2xl"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-xs font-bold uppercase tracking-widest bg-white/20 px-3 py-1 rounded-full backdrop-blur-sm flex items-center gap-2",children:[e.jsx(ne,{size:12}),"Devocional del D√≠a"]}),e.jsx("div",{className:"flex gap-2",children:x&&e.jsx("button",{onClick:W,className:"p-2 hover:bg-white/20 rounded-full transition-colors",children:e.jsx(de,{size:18})})})]}),e.jsx("h3",{className:"text-xl font-bold mb-2 leading-tight",children:i.devocional_central.titulo}),e.jsx("p",{className:"text-sm text-violet-100 leading-relaxed mb-4 line-clamp-3 opacity-90",children:i.devocional_central.explicacion}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"font-bold text-violet-200 text-xs uppercase tracking-wider",children:[i.metadatos.libro," ",i.metadatos.capitulo]}),e.jsxs("button",{onClick:K,className:"flex items-center gap-2 bg-white text-violet-700 px-4 py-2 rounded-full text-sm font-bold hover:bg-violet-50 transition-colors shadow-sm active:scale-95",children:["Leer Completo ",e.jsx(D,{size:16})]})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6 animate-in slide-in-from-bottom-5 duration-500 delay-400",children:[e.jsxs("button",{onClick:()=>u("/devocionales"),className:"bg-white dark:bg-[#1e1e1e] p-4 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-800 flex flex-col items-center justify-center gap-3 text-center hover:shadow-md transition-all group",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-violet-50 dark:bg-violet-900/20 flex items-center justify-center text-violet-600 dark:text-violet-400 group-hover:scale-110 transition-transform",children:e.jsx($,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-900 dark:text-white text-sm",children:"Devocionales"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Inspiraci√≥n diaria"})]})]}),e.jsxs("button",{onClick:()=>u("/diccionario"),className:"bg-white dark:bg-[#1e1e1e] p-4 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-800 flex flex-col items-center justify-center gap-3 text-center hover:shadow-md transition-all group",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-indigo-50 dark:bg-indigo-900/20 flex items-center justify-center text-indigo-600 dark:text-indigo-400 group-hover:scale-110 transition-transform",children:e.jsx(ce,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-900 dark:text-white text-sm",children:"Diccionario"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"T√©rminos b√≠blicos"})]})]})]}),b&&e.jsx("div",{className:"mb-6 animate-in slide-in-from-bottom-4 duration-500 delay-400",children:e.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-lg border border-slate-100 relative overflow-hidden group",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-xs font-bold uppercase tracking-widest text-indigo-500 bg-indigo-50 px-3 py-1 rounded-full flex items-center gap-2",children:[e.jsx(M,{size:12}),"Tema del D√≠a"]}),e.jsx("button",{onClick:()=>u("/temas"),className:"text-xs font-bold text-indigo-400 hover:text-indigo-600 transition-colors",children:"Ver todos"})]}),e.jsx("h3",{className:"text-xl font-bold mb-2 text-slate-800 leading-tight",children:b.devocional_central.titulo}),e.jsx("p",{className:"text-sm text-slate-500 leading-relaxed mb-4 line-clamp-2",children:b.metadatos.tema_central}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"font-bold text-slate-400 text-xs uppercase tracking-wider",children:[b.metadatos.libro," ",b.metadatos.capitulo]}),e.jsxs("button",{onClick:()=>u(`/temas/${b.id}`),className:"flex items-center gap-2 text-indigo-600 font-bold text-sm hover:bg-indigo-50 px-3 py-1.5 rounded-full transition-colors",children:["Leer completo ",e.jsx(S,{size:16})]})]})]})}),e.jsx("div",{className:"flex justify-center mb-6",children:e.jsxs("button",{onClick:s,className:"text-xs text-gray-400 dark:text-gray-500 hover:text-blue-500 dark:hover:text-blue-400 transition-colors flex items-center gap-1.5 py-2 px-4 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800",children:[e.jsx("span",{className:"opacity-70",children:"¬øTienes sugerencias?"}),e.jsx("span",{className:"font-medium underline decoration-dotted",children:"Ay√∫danos a mejorar"})]})}),e.jsx(me,{isOpen:I,onClose:()=>N(!1),notifications:y,onClearAll:L,onMarkAsRead:H}),e.jsxs("footer",{className:"mt-12 text-center text-sm text-slate-400 pb-8 animate-in fade-in duration-700 delay-500",children:[e.jsx("p",{children:"¬© 2025 Biblia Reina Valera 1909"}),e.jsx("p",{className:"text-xs mt-1 opacity-60",children:"Hecho con ‚ù§Ô∏è para la comunidad"})]})]})};export{we as default};
