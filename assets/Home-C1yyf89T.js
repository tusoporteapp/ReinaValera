import{d as k,j as e,u as P,a as Q,t as W}from"./index-CNDHqYUK.js";import{r as m,u as q,R as K}from"./react-vendor-KOjhOASN.js";import{f as z,h as X,j as Y,k as C,m as f,n as J,u as U}from"./firebase-vendor-DovfRJH6.js";import{x as j,K as Z,X as ee,Q as B,G as D,B as T,W as S,Y as te,b as se,T as ae,C as $,_ as ie,d as le,I as re,$ as oe}from"./ui-vendor-C7KNVAlS.js";import"https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";import"https://www.gstatic.com/firebasejs/12.6.0/firebase-analytics.js";import"https://www.gstatic.com/firebasejs/12.6.0/firebase-messaging.js";const ne=()=>{const[h,o]=m.useState(null);return m.useEffect(()=>{const i=z(k,"stats","global"),a=X(i,l=>{l.exists()?o(l.data().visits||0):o(0)});return(async()=>{try{const u=(await(await fetch("https://api.ipify.org?format=json")).json()).ip,g=u.replace(/\./g,"-").replace(/:/g,"_"),d=z(k,"visits",g);(await Y(d)).exists()?await U(d,{lastVisit:f()}):(await C(d,{ip:u,firstVisit:f(),lastVisit:f()}),await C(i,{visits:J(1)},{merge:!0}))}catch(l){console.error("Error registering visit:",l)}})(),()=>a()},[]),{visitCount:h}},de=({isOpen:h,onClose:o,notifications:i,onClearAll:a,onMarkAsRead:b})=>{if(!h)return null;const l=t=>new Date(t).toLocaleDateString("es-ES",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"});return e.jsxs("div",{className:"fixed inset-0 z-[100] flex justify-end",children:[e.jsx("div",{className:"absolute inset-0 bg-black/30 backdrop-blur-sm animate-in fade-in duration-300",onClick:o}),e.jsxs("div",{className:"relative w-full max-w-sm h-full bg-white dark:bg-[#1a1a1a] shadow-2xl animate-in slide-in-from-right duration-300 flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-800 flex items-center justify-between bg-white/80 dark:bg-[#1a1a1a]/80 backdrop-blur-md z-10",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{size:20,className:"text-primary"}),e.jsx("h2",{className:"font-bold text-lg dark:text-white",children:"Notificaciones"}),e.jsx("span",{className:"bg-gray-100 dark:bg-gray-800 text-xs font-bold px-2 py-0.5 rounded-full text-gray-600 dark:text-gray-400",children:i.length})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[i.length>0&&e.jsx("button",{onClick:a,className:"p-2 hover:bg-red-50 dark:hover:bg-red-900/20 text-red-500 rounded-full transition-colors",title:"Borrar todas",children:e.jsx(Z,{size:18})}),e.jsx("button",{onClick:o,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:e.jsx(ee,{size:20})})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:i.length===0?e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-gray-400 space-y-4 opacity-60",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center",children:e.jsx(j,{size:32})}),e.jsx("p",{className:"text-sm",children:"No tienes notificaciones"})]}):i.map(t=>e.jsxs("div",{className:`
                  relative p-4 rounded-xl border transition-all hover:shadow-md
                  ${t.read?"bg-white dark:bg-[#1a1a1a] border-gray-100 dark:border-gray-800 opacity-80":"bg-blue-50/50 dark:bg-blue-900/10 border-blue-100 dark:border-blue-800"}
                `,onClick:()=>b(t.id),children:[!t.read&&e.jsx("div",{className:"absolute top-4 right-4 w-2 h-2 bg-blue-500 rounded-full"}),e.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-1 pr-4",children:t.title}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 leading-relaxed mb-2",children:t.body}),e.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-gray-400 font-medium uppercase tracking-wider",children:[e.jsx(B,{size:10}),l(t.timestamp)]})]},t.id))})]})]})},fe=({data:h,onNavigate:o,lastReading:i,progress:a,setShowDailyGoalModal:b,setShowQuizModal:l,onShare:t,userName:u,onShowFeedback:g,notifications:d=[],onClearNotifications:v=()=>{},onMarkNotificationAsRead:R=()=>{},bookmarks:V})=>{const c=q(),[_,N]=K.useState(!1),[I,L]=m.useState(0);m.useEffect(()=>{let r=0;for(let n=0;n<localStorage.length;n++){const p=localStorage.key(n);p&&p.startsWith("liked_")&&localStorage.getItem(p)==="true"&&r++}L(r)},[]),I+V.length;const{bookName:M,chapterIndex:E,bookId:ce}=i,G=E+1,H=()=>{const r=new Date().getHours(),n=u?`, ${u.split(" ")[0]}`:"";return r<12?`Buenos días${n}`:r<19?`Buenas tardes${n}`:`Buenas noches${n}`},{totalLikes:y}=P(),{visitCount:w}=ne(),s=m.useMemo(()=>Q.getDevotionalOfTheDay(),[]),x=m.useMemo(()=>W.getTopicOfTheDay(),[]),O=Math.min(100,Math.round(a.chaptersReadToday/a.dailyGoal*100)),A=()=>{s&&t&&t({text:`Devocional del Día: ${s.devocional_central.titulo}

${s.devocional_central.explicacion.substring(0,150)}...`,reference:`${s.metadatos.libro} ${s.metadatos.capitulo}`,url:"https://bibliarv1909.com"})},F=()=>{if(s){const r=s.bookId||s.metadatos.libro;c(`/devocional/${r}/${s.metadatos.capitulo}`)}};return e.jsxs("div",{className:"flex-1 overflow-y-auto bg-gray-50 dark:bg-[#121212] p-4 pb-24",children:[e.jsx("header",{className:"mb-6 mt-2 px-2",children:e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-serif font-bold text-gray-900 dark:text-white animate-in slide-in-from-left duration-500",children:H()}),e.jsxs("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-1 flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-blue-500"}),h.version||"Reina Valera 1909"]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-1",children:[e.jsxs("button",{onClick:()=>N(!0),className:"relative p-2 bg-white dark:bg-[#1a1a1a] rounded-full shadow-sm border border-gray-100 dark:border-gray-800 text-gray-600 dark:text-gray-300 active:scale-95 transition-transform",children:[e.jsx(j,{size:20}),d.some(r=>!r.read)&&e.jsx("span",{className:"absolute top-0 right-0 w-2.5 h-2.5 bg-red-500 rounded-full border-2 border-white dark:border-[#1a1a1a]"})]}),w!==null&&e.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-gray-400 font-medium px-1",children:[e.jsx(D,{size:10}),e.jsx("span",{children:w.toLocaleString()})]})]})]})}),e.jsxs("div",{className:"mb-6 grid grid-cols-3 gap-3 animate-in slide-in-from-bottom-2 duration-500 delay-100",children:[e.jsxs("button",{onClick:()=>o("reader"),className:"bg-gradient-to-br from-emerald-500 to-teal-600 rounded-2xl p-4 text-white shadow-lg relative overflow-hidden cursor-pointer active:scale-95 transition-all group text-left col-span-1",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -mr-8 -mt-8 blur-2xl"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(B,{size:16,className:"text-emerald-200"}),e.jsx("div",{className:"h-8 w-8 bg-white/20 rounded-lg flex items-center justify-center backdrop-blur-sm",children:e.jsx(T,{size:16})})]}),e.jsx("h3",{className:"text-sm font-bold mb-0.5 truncate",children:M}),e.jsxs("p",{className:"text-xs text-emerald-100",children:["Cap. ",G]})]})]}),e.jsxs("div",{onClick:()=>b(!0),className:"bg-gradient-to-br from-blue-600 to-indigo-700 rounded-2xl p-4 text-white shadow-lg relative overflow-hidden cursor-pointer active:scale-95 transition-all group col-span-1",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -mr-8 -mt-8 blur-2xl"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(S,{size:16,className:"text-blue-200"}),e.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[e.jsx(te,{size:12,className:a.dailyStreak>0?"text-orange-400 fill-orange-400":""}),e.jsx("span",{className:"font-bold",children:a.dailyStreak})]})]}),e.jsx("h3",{className:"text-sm font-bold mb-1",children:"Meta Diaria"}),e.jsxs("div",{className:"flex items-baseline gap-1",children:[e.jsx("span",{className:"text-xl font-bold",children:a.chaptersReadToday}),e.jsxs("span",{className:"text-xs text-blue-100",children:["/ ",a.dailyGoal]})]}),e.jsx("div",{className:"mt-2 h-1.5 bg-black/20 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-white rounded-full transition-all duration-500",style:{width:`${O}%`}})})]})]}),e.jsxs("div",{onClick:()=>l(!0),className:"bg-gradient-to-br from-purple-600 to-pink-600 rounded-2xl p-4 text-white shadow-lg relative overflow-hidden cursor-pointer active:scale-95 transition-all group col-span-1",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -mr-8 -mt-8 blur-2xl"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(se,{size:16,className:"text-purple-200"}),e.jsx("div",{className:"h-8 w-8 bg-white/20 rounded-lg flex items-center justify-center backdrop-blur-sm",children:e.jsx(ae,{size:16})})]}),e.jsx("h3",{className:"text-sm font-bold mb-0.5",children:"Quiz"}),e.jsx("p",{className:"text-xs text-purple-100",children:"Bíblico"})]})]})]}),e.jsx("div",{className:"mb-6 animate-in slide-in-from-bottom-3 duration-500 delay-200",children:e.jsxs("button",{onClick:()=>c("/favoritos"),className:"w-full bg-gradient-to-r from-pink-500 to-rose-600 rounded-3xl p-5 text-white shadow-xl shadow-pink-500/20 relative overflow-hidden group active:scale-[0.98] transition-all text-left",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-10 -mt-10 blur-2xl group-hover:bg-white/20 transition-colors"}),e.jsxs("div",{className:"relative z-10 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(D,{className:"text-pink-100 fill-pink-100/30",size:18}),e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider text-pink-100",children:"Tendencias"})]}),e.jsxs("h3",{className:"text-2xl font-bold leading-none mb-1",children:["Lo más popular ",e.jsx("span",{className:"text-base font-medium opacity-90",children:"de la comunidad"})]}),e.jsx("p",{className:"text-xs text-pink-100 max-w-[200px] truncate",children:y>0?`+${y.toLocaleString()} likes en la comunidad`:"Descubre qué están leyendo otros."})]}),e.jsx("div",{className:"h-12 w-12 bg-white/20 backdrop-blur-md rounded-2xl flex items-center justify-center shadow-sm group-hover:scale-110 transition-transform",children:e.jsx($,{size:24,className:"text-white"})})]})]})}),s&&e.jsx("div",{className:"mb-6 animate-in slide-in-from-bottom-5 duration-500 delay-300",children:e.jsxs("div",{className:"bg-gradient-to-br from-violet-600 to-fuchsia-700 rounded-3xl p-6 text-white shadow-xl shadow-violet-500/20 relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-8 -mt-8 blur-2xl"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-xs font-bold uppercase tracking-widest bg-white/20 px-3 py-1 rounded-full backdrop-blur-sm flex items-center gap-2",children:[e.jsx(ie,{size:12}),"Devocional del Día"]}),e.jsx("div",{className:"flex gap-2",children:t&&e.jsx("button",{onClick:A,className:"p-2 hover:bg-white/20 rounded-full transition-colors",children:e.jsx(le,{size:18})})})]}),e.jsx("h3",{className:"text-xl font-bold mb-2 leading-tight",children:s.devocional_central.titulo}),e.jsx("p",{className:"text-sm text-violet-100 leading-relaxed mb-4 line-clamp-3 opacity-90",children:s.devocional_central.explicacion}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"font-bold text-violet-200 text-xs uppercase tracking-wider",children:[s.metadatos.libro," ",s.metadatos.capitulo]}),e.jsxs("button",{onClick:F,className:"flex items-center gap-2 bg-white text-violet-700 px-4 py-2 rounded-full text-sm font-bold hover:bg-violet-50 transition-colors shadow-sm active:scale-95",children:["Leer Completo ",e.jsx(T,{size:16})]})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6 animate-in slide-in-from-bottom-5 duration-500 delay-400",children:[e.jsxs("button",{onClick:()=>c("/devocionales"),className:"bg-white dark:bg-[#1e1e1e] p-4 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-800 flex flex-col items-center justify-center gap-3 text-center hover:shadow-md transition-all group",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-violet-50 dark:bg-violet-900/20 flex items-center justify-center text-violet-600 dark:text-violet-400 group-hover:scale-110 transition-transform",children:e.jsx(re,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-900 dark:text-white text-sm",children:"Devocionales"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Inspiración diaria"})]})]}),e.jsxs("button",{onClick:()=>c("/diccionario"),className:"bg-white dark:bg-[#1e1e1e] p-4 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-800 flex flex-col items-center justify-center gap-3 text-center hover:shadow-md transition-all group",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-indigo-50 dark:bg-indigo-900/20 flex items-center justify-center text-indigo-600 dark:text-indigo-400 group-hover:scale-110 transition-transform",children:e.jsx(oe,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-900 dark:text-white text-sm",children:"Diccionario"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Términos bíblicos"})]})]})]}),x&&e.jsx("div",{className:"mb-6 animate-in slide-in-from-bottom-4 duration-500 delay-400",children:e.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-lg border border-slate-100 relative overflow-hidden group",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-xs font-bold uppercase tracking-widest text-indigo-500 bg-indigo-50 px-3 py-1 rounded-full flex items-center gap-2",children:[e.jsx(S,{size:12}),"Tema del Día"]}),e.jsx("button",{onClick:()=>c("/temas"),className:"text-xs font-bold text-indigo-400 hover:text-indigo-600 transition-colors",children:"Ver todos"})]}),e.jsx("h3",{className:"text-xl font-bold mb-2 text-slate-800 leading-tight",children:x.devocional_central.titulo}),e.jsx("p",{className:"text-sm text-slate-500 leading-relaxed mb-4 line-clamp-2",children:x.metadatos.tema_central}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"font-bold text-slate-400 text-xs uppercase tracking-wider",children:[x.metadatos.libro," ",x.metadatos.capitulo]}),e.jsxs("button",{onClick:()=>c(`/temas/${x.id}`),className:"flex items-center gap-2 text-indigo-600 font-bold text-sm hover:bg-indigo-50 px-3 py-1.5 rounded-full transition-colors",children:["Leer completo ",e.jsx($,{size:16})]})]})]})}),e.jsx("div",{className:"flex justify-center mb-6",children:e.jsxs("button",{onClick:g,className:"text-xs text-gray-400 dark:text-gray-500 hover:text-blue-500 dark:hover:text-blue-400 transition-colors flex items-center gap-1.5 py-2 px-4 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800",children:[e.jsx("span",{className:"opacity-70",children:"¿Tienes sugerencias?"}),e.jsx("span",{className:"font-medium underline decoration-dotted",children:"Ayúdanos a mejorar"})]})}),e.jsx(de,{isOpen:_,onClose:()=>N(!1),notifications:d,onClearAll:v,onMarkAsRead:R}),e.jsxs("footer",{className:"mt-12 text-center text-sm text-slate-400 pb-8 animate-in fade-in duration-700 delay-500",children:[e.jsx("p",{children:"© 2025 Biblia Reina Valera 1909"}),e.jsx("p",{className:"text-xs mt-1 opacity-60",children:"Hecho con ❤️ para la comunidad"})]})]})};export{fe as default};
