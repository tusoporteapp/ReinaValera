<!DOCTYPE html>
<html>
<head>
    <title>Limpiando Service Worker...</title>
</head>
<body>
    <h1>Limpiando caché...</h1>
    <p id="status">Procesando...</p>
    <script>
        async function clearAll() {
            const status = document.getElementById('status');
            
            // Desregistrar todos los service workers
            const registrations = await navigator.serviceWorker.getRegistrations();
            for (let registration of registrations) {
                await registration.unregister();
                status.innerHTML += '<br>✅ Service Worker desregistrado';
            }
            
            // Limpiar todas las cachés
            const cacheNames = await caches.keys();
            for (let cacheName of cacheNames) {
                await caches.delete(cacheName);
                status.innerHTML += '<br>✅ Caché eliminado: ' + cacheName;
            }
            
            status.innerHTML += '<br><br><strong>✅ Listo! Cierra esta pestaña y recarga la aplicación.</strong>';
        }
        
        clearAll();
    </script>
</body>
</html>
